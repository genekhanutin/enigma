require "pry"                   # => true
require_relative "key"          # => true
require_relative "offset_calc"  # => true

class Rotator
	attr_reader :key, :offset  # => nil

	def initialize(key = 0, offset = 0, message = "")
		key                                               # => "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442",...
		@key     = key.to_s                               # => "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442", "83442",...
		@offset  = offset.to_s                            # => "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", "1225", ...
		@message = message                                # => "this", " is ", "a se", "cret", " mes", "sage", ", do", "nt t", "ell ", "anyo", "ne a", "bout", " it ", "or y", "ou w", "ill ", "face", " ser", "ious", " con", "sequ", "ence", "s. y", "ou w", "ill ", "have", " to ", "atte", "nd t", "urin", "g fo", "r 7 ", "mont", "hs", "zep0", "dfzf", "g7zm", "iol1", "djl0", "y nm", "f7kw", "tqe1", "kisf", "gk5w", "tbei", "hl11", "df0f", "uoe6", "ure4", "oisf", "l jm", "dplz", "ol10", "d,vv", "ybx2", "k...
	end                                                # => :initialize

	def self.encrypt(key, date_offset, message)
		encrypted = message.chars.each_slice(4).map do |slice|                   # => #<Enumerator: ["t", "h", "i", "s", " ", "i", "s", " ", "a", " ", "s", "e", "c", "r", "e", "t", " ", "m", "e", "s", "s", "a", "g", "e", ",", " ", "d", "o", "n", "t", " ", "t", "e", "l", "l", " ", "a", "n", "y", "o", "n", "e", " ", "a", "b", "o", "u", "t", " ", "i", "t", " ", "o", "r", " ", "y", "o", "u", " ", "w", "i", "l", "l", " ", "f", "a", "c", "e", " ", "s", "e", "r", "i", "o", "u", "s", " ", "c", "o", "n", "s...
			Rotator.new(key, date_offset, slice.join).combine_encrypted_characters  # => "zep0", "dfzf", "g7zm", "iol1", "djl0", "y nm", "f7kw", "tqe1", "kisf", "gk5w", "tbei", "hl11", "df0f", "uoe6", "ure4", "oisf", "l jm", "dplz", "ol10", "d,vv", "ybx2", "kkjm", "y8e6", "ure4", "oisf", "n 2m", "dqvf", "gq0m", "tae1", "0opv", "m7mw", "x7bf", "slu1", "np"
		end                                                                      # => ["zep0", "dfzf", "g7zm", "iol1", "djl0", "y nm", "f7kw", "tqe1", "kisf", "gk5w", "tbei", "hl11", "df0f", "uoe6", "ure4", "oisf", "l jm", "dplz", "ol10", "d,vv", "ybx2", "kkjm", "y8e6", "ure4", "oisf", "n 2m", "dqvf", "gq0m", "tae1", "0opv", "m7mw", "x7bf", "slu1", "np"]
		encrypted.join                                                           # => "zep0dfzfg7zmiol1djl0y nmf7kwtqe1kisfgk5wtbeihl11df0fuoe6ure4oisfl jmdplzol10d,vvybx2kkjmy8e6ure4oisfn 2mdqvfgq0mtae10opvm7mwx7bfslu1np"
	end                                                                       # => :encrypt

	def self.decrypt(key, date_offset, message)
		decrypted = message.chars.each_slice(4).map do |slice|                   # => #<Enumerator: ["z", "e", "p", "0", "d", "f", "z", "f", "g", "7", "z", "m", "i", "o", "l", "1", "d", "j", "l", "0", "y", " ", "n", "m", "f", "7", "k", "w", "t", "q", "e", "1", "k", "i", "s", "f", "g", "k", "5", "w", "t", "b", "e", "i", "h", "l", "1", "1", "d", "f", "0", "f", "u", "o", "e", "6", "u", "r", "e", "4", "o", "i", "s", "f", "l", " ", "j", "m", "d", "p", "l", "z", "o", "l", "1", "0", "d", ",", "v", "v", "y...
			Rotator.new(key, date_offset, slice.join).combine_decrypted_characters  # => "this", " is ", "a se", "cret", " mes", "sage", ", do", "nt t", "ell ", "anyo", "ne a", "bout", " it ", "or y", "ou w", "ill ", "face", " ser", "ious", " con", "sequ", "ence", "s. y", "ou w", "ill ", "have", " to ", "atte", "nd t", "urin", "g fo", "r 7 ", "mont", "hs"
		end                                                                      # => ["this", " is ", "a se", "cret", " mes", "sage", ", do", "nt t", "ell ", "anyo", "ne a", "bout", " it ", "or y", "ou w", "ill ", "face", " ser", "ious", " con", "sequ", "ence", "s. y", "ou w", "ill ", "have", " to ", "atte", "nd t", "urin", "g fo", "r 7 ", "mont", "hs"]
		decrypted.join                                                           # => "this is a secret message, dont tell anyone about it or you will face serious consequences. you will have to attend turing for 7 months"
	end                                                                       # => :decrypt

	def combine_encrypted_characters
		rotation_a(rotation_value_generator) + rotation_b(rotation_value_generator) + rotation_c(rotation_value_generator) + rotation_d(rotation_value_generator)  # => "zep0", "dfzf", "g7zm", "iol1", "djl0", "y nm", "f7kw", "tqe1", "kisf", "gk5w", "tbei", "hl11", "df0f", "uoe6", "ure4", "oisf", "l jm", "dplz", "ol10", "d,vv", "ybx2", "kkjm", "y8e6", "ure4", "oisf", "n 2m", "dqvf", "gq0m", "tae1", "0opv", "m7mw", "x7bf", "slu1", "np"
	end                                                                                                                                                         # => :combine_encrypted_characters

	def combine_decrypted_characters
		rotation_vals = rotation_value_generator.map do |i|                                                            # => [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [...
			-i                                                                                                            # => -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47, -84, -36, -46, -47,...
		end                                                                                                            # => [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84, -36, -46, -47], [-84,...
		rotation_a(rotation_vals) + rotation_b(rotation_vals) + rotation_c(rotation_vals) + rotation_d(rotation_vals)  # => "this", " is ", "a se", "cret", " mes", "sage", ", do", "nt t", "ell ", "anyo", "ne a", "bout", " it ", "or y", "ou w", "ill ", "face", " ser", "ious", " con", "sequ", "ence", "s. y", "ou w", "ill ", "have", " to ", "atte", "nd t", "urin", "g fo", "r 7 ", "mont", "hs"
	end                                                                                                             # => :combine_decrypted_characters
	
	def character_map
		character_map = [*('a'..'z'), *("0".."9"), ' ', '.', ',']  # => ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", " ", ".", ","], ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", " ", ".", ","], ["a", "b", "c", "d", "e", "f", "g", "...
  end                                                        # => :character_map

	def rotation_value_generator
		encryption_key = []                                          # => [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [...
  	4.times do |iteration|                                      # => 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, ...
  		encryption_key << key_encryptor(iteration, iteration + 1)  # => [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47], [84], [84, 36], [84, 36, 46], [84, 36, 46, 47...
  	end                                                         # => 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, ...
  	encryption_key                                              # => [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47], [84, 36, 46, 47...
	end                                                           # => :rotation_value_generator

	def rotation_a(rotation_values)
		first_character  = @message[0]                                                       # => "t", " ", "a", "c", " ", "s", ",", "n", "e", "a", "n", "b", " ", "o", "o", "i", "f", " ", "i", " ", "s", "e", "s", "o", "i", "h", " ", "a", "n", "u", "g", "r", "m", "h", "z", "d", "g", "i", "d", "y", "f", "t", "k", "g", "t", "h", "d", "u", "u", "o", "l", "d", "o", "d", "y", "k", "y", "u", "o", "n", "d", "g", "t", "0", "m", "x", "s", "n"
		result           = (character_map.index(first_character) + rotation_values[0]) % 39  # => 25, 3, 6, 8, 3, 24, 5, 19, 10, 6, 19, 7, 3, 20, 20, 14, 11, 3, 14, 3, 24, 10, 24, 20, 14, 13, 3, 6, 19, 26, 12, 23, 18, 13, 19, 36, 0, 2, 36, 18, 38, 13, 4, 0, 13, 1, 36, 14, 14, 8, 5, 36, 8, 36, 18, 4, 18, 14, 8, 7, 36, 0, 13, 20, 6, 17, 12, 7
		character_map[result].to_s                                                           # => "z", "d", "g", "i", "d", "y", "f", "t", "k", "g", "t", "h", "d", "u", "u", "o", "l", "d", "o", "d", "y", "k", "y", "u", "o", "n", "d", "g", "t", "0", "m", "x", "s", "n", "t", " ", "a", "c", " ", "s", ",", "n", "e", "a", "n", "b", " ", "o", "o", "i", "f", " ", "i", " ", "s", "e", "s", "o", "i", "h", " ", "a", "n", "u", "g", "r", "m", "h"
	end                                                                                   # => :rotation_a

	def rotation_b(rotation_values)
		if @message[1].nil?                                                                # => false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, f...
			""
		else
			second_character = @message[1]                                                    # => "h", "i", " ", "r", "m", "a", " ", "t", "l", "n", "e", "o", "i", "r", "u", "l", "a", "s", "o", "c", "e", "n", ".", "u", "l", "a", "t", "t", "d", "r", " ", " ", "o", "s", "e", "f", "7", "o", "j", " ", "7", "q", "i", "k", "b", "l", "f", "o", "r", "i", " ", "p", "l", ",", "b", "k", "8", "r", "i", " ", "q", "q", "a", "o", "7", "7", "l", "p"
			result 					 = (character_map.index(second_character) + rotation_values[1]) % 39  # => 4, 5, 33, 14, 9, 36, 33, 16, 8, 10, 1, 11, 5, 14, 17, 8, 36, 15, 11, 38, 1, 10, 34, 17, 8, 36, 16, 16, 0, 14, 33, 33, 11, 15, 7, 8, 36, 17, 12, 0, 36, 19, 11, 13, 4, 14, 8, 17, 20, 11, 0, 18, 14, 2, 4, 13, 37, 20, 11, 0, 19, 19, 3, 17, 36, 36, 14, 18
			character_map[result].to_s                                                        # => "e", "f", "7", "o", "j", " ", "7", "q", "i", "k", "b", "l", "f", "o", "r", "i", " ", "p", "l", ",", "b", "k", "8", "r", "i", " ", "q", "q", "a", "o", "7", "7", "l", "p", "h", "i", " ", "r", "m", "a", " ", "t", "l", "n", "e", "o", "i", "r", "u", "l", "a", "s", "o", "c", "e", "n", ".", "u", "l", "a", "t", "t", "d", "r", " ", " ", "o", "s"
		end                                                                                # => "e", "f", "7", "o", "j", " ", "7", "q", "i", "k", "b", "l", "f", "o", "r", "i", " ", "p", "l", ",", "b", "k", "8", "r", "i", " ", "q", "q", "a", "o", "7", "7", "l", "p", "h", "i", " ", "r", "m", "a", " ", "t", "l", "n", "e", "o", "i", "r", "u", "l", "a", "s", "o", "c", "e", "n", ".", "u", "l", "a", "t", "t", "d", "r", " ", " ", "o", "s"
	end                                                                                 # => :rotation_b

	def rotation_c(rotation_values)
		if @message[2].nil?                                                                 # => false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, f...
			""                                                                                 # => "", ""
		else
			third_character  = @message[2]                                                     # => "i", "s", "s", "e", "e", "g", "d", " ", "l", "y", " ", "u", "t", " ", " ", "l", "c", "e", "u", "o", "q", "c", " ", " ", "l", "v", "o", "t", " ", "i", "f", "7", "n", "p", "z", "z", "l", "l", "n", "k", "e", "s", "5", "e", "1", "0", "e", "e", "s", "j", "l", "1", "v", "x", "j", "e", "e", "s", "2", "v", "0", "e", "p", "m", "b", "u"
			result 			     = (character_map.index(third_character) + rotation_values[2]) % 39  # => 15, 25, 25, 11, 11, 13, 10, 4, 18, 31, 4, 27, 26, 4, 4, 18, 9, 11, 27, 21, 23, 9, 4, 4, 18, 28, 21, 26, 4, 15, 12, 1, 20, 8, 18, 18, 4, 4, 6, 3, 36, 11, 24, 36, 20, 19, 36, 36, 11, 2, 4, 20, 14, 16, 2, 36, 36, 11, 21, 14, 19, 36, 8, 5, 33, 13
			character_map[result].to_s                                                         # => "p", "z", "z", "l", "l", "n", "k", "e", "s", "5", "e", "1", "0", "e", "e", "s", "j", "l", "1", "v", "x", "j", "e", "e", "s", "2", "v", "0", "e", "p", "m", "b", "u", "i", "s", "s", "e", "e", "g", "d", " ", "l", "y", " ", "u", "t", " ", " ", "l", "c", "e", "u", "o", "q", "c", " ", " ", "l", "v", "o", "t", " ", "i", "f", "7", "n"
		end                                                                                 # => "p", "z", "z", "l", "l", "n", "k", "e", "s", "5", "e", "1", "0", "e", "e", "s", "j", "l", "1", "v", "x", "j", "e", "e", "s", "2", "v", "0", "e", "p", "m", "b", "u", "", "i", "s", "s", "e", "e", "g", "d", " ", "l", "y", " ", "u", "t", " ", " ", "l", "c", "e", "u", "o", "q", "c", " ", " ", "l", "v", "o", "t", " ", "i", "f", "7", "n", ""
	end                                                                                  # => :rotation_c

	def rotation_d(rotation_values)
		if @message[3].nil?                                                                # => false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, fa...
			""                                                                                # => "", ""
		else
			fourth_character = @message[3]                                                    # => "s", " ", "e", "t", "s", "e", "o", "t", " ", "o", "a", "t", " ", "y", "w", " ", "e", "r", "s", "n", "u", "e", "y", "w", " ", "e", " ", "e", "t", "n", "o", " ", "t", "0", "f", "m", "1", "0", "m", "w", "1", "f", "w", "i", "1", "f", "6", "4", "f", "m", "z", "0", "v", "2", "m", "6", "4", "f", "m", "f", "m", "1", "v", "w", "f", "1"
			result 					 = (character_map.index(fourth_character) + rotation_values[3]) % 39  # => 26, 5, 12, 27, 26, 12, 22, 27, 5, 22, 8, 27, 5, 32, 30, 5, 12, 25, 26, 21, 28, 12, 32, 30, 5, 12, 5, 12, 27, 21, 22, 5, 27, 18, 36, 4, 19, 18, 4, 14, 19, 36, 14, 0, 19, 36, 24, 22, 36, 4, 17, 18, 13, 20, 4, 24, 22, 36, 4, 36, 4, 19, 13, 14, 36, 19
			character_map[result].to_s                                                        # => "0", "f", "m", "1", "0", "m", "w", "1", "f", "w", "i", "1", "f", "6", "4", "f", "m", "z", "0", "v", "2", "m", "6", "4", "f", "m", "f", "m", "1", "v", "w", "f", "1", "s", " ", "e", "t", "s", "e", "o", "t", " ", "o", "a", "t", " ", "y", "w", " ", "e", "r", "s", "n", "u", "e", "y", "w", " ", "e", " ", "e", "t", "n", "o", " ", "t"
		end                                                                                # => "0", "f", "m", "1", "0", "m", "w", "1", "f", "w", "i", "1", "f", "6", "4", "f", "m", "z", "0", "v", "2", "m", "6", "4", "f", "m", "f", "m", "1", "v", "w", "f", "1", "", "s", " ", "e", "t", "s", "e", "o", "t", " ", "o", "a", "t", " ", "y", "w", " ", "e", "r", "s", "n", "u", "e", "y", "w", " ", "e", " ", "e", "t", "n", "o", " ", "t", ""
	end                                                                                 # => :rotation_d

	private  # => Rotator

	def key_encryptor(first_index, second_index)
		key_pair_amount  = (key[first_index] + key[second_index]).to_i  # => 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44, 42, 83, 34, 44...
  	offset_amount 	 = offset[first_index].to_i                     # => 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, 2, 5, 1, 2, ...
  	key_pair_amount + offset_amount                                # => 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46, 47, 84, 36, 46...
	end                                                              # => :key_encryptor
end                                                               # => :key_encryptor

key = Key.new.key_generator                                                                                                                                                               # => "83442"
offset = OffsetCalc.new.last_four_digits_of_squared_date                                                                                                                                  # => "4225"
encrypted_message = Rotator.encrypt(key, 1225, "this is a secret message, dont tell anyone about it or you will face serious consequences. you will have to attend turing for 7 months")  # => "zep0dfzfg7zmiol1djl0y nmf7kwtqe1kisfgk5wtbeihl11df0fuoe6ure4oisfl jmdplzol10d,vvybx2kkjmy8e6ure4oisfn 2mdqvfgq0mtae10opvm7mwx7bfslu1np"
Rotator.decrypt(key, 1225, encrypted_message)                                                                                                                                             # => "this is a secret message, dont tell anyone about it or you will face serious consequences. you will have to attend turing for 7 months"




